{"remainingRequest":"/Users/anne/vue_unnotech/node_modules/babel-loader/lib/index.js!/Users/anne/vue_unnotech/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/anne/vue_unnotech/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/anne/vue_unnotech/src/components/BookDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/anne/vue_unnotech/src/components/BookDetail.vue","mtime":1615072686876},{"path":"/Users/anne/vue_unnotech/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anne/vue_unnotech/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/anne/vue_unnotech/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anne/vue_unnotech/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKdmFyIGJvb2tEZXRhaWxBUEkgPSAnaHR0cHM6Ly9mZS1pbnRlcnZpZXctYXBpLnVubm90ZWNoLmNvbS9wcm9maWxlLyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGV0YWlsOiAnJywKICAgICAgdmFsaWRhdGlvbjogW2ZhbHNlLCBmYWxzZV0sCiAgICAgIG1vZGFsOiAnJwogICAgfTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmdldERldGFpbCgpOwogIH0sCiAgd2F0Y2g6IHsKICAgICRyb3V0ZTogZnVuY3Rpb24gJHJvdXRlKCkgewogICAgICB0aGlzLmdldERldGFpbCgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ2V0RGV0YWlsOiBmdW5jdGlvbiBnZXREZXRhaWwoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgYnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J0bicpOwogICAgICB2YXIgY291bnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjY291bnQnKTsKICAgICAgdmFyIHByaWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3ByaWNlJyk7CiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIiLmNvbmNhdChib29rRGV0YWlsQVBJKS5jb25jYXQodGhpcy4kcm91dGUucGFyYW1zLmlkKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBfdGhpcy5kZXRhaWwgPSB7CiAgICAgICAgICBwcmljZTogcGFyc2VJbnQocmVzcG9uc2UuZGF0YS5wcmljZSwgMTApLAogICAgICAgICAgY291bnQ6IHBhcnNlSW50KHJlc3BvbnNlLmRhdGEuY291bnQsIDEwKQogICAgICAgIH07CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgIHByaWNlLmNsYXNzTGlzdC5hZGQoJ2ZhZGUtaW4nKTsKICAgICAgICBjb3VudC5jbGFzc0xpc3QuYWRkKCdmYWRlLWluJyk7CiAgICAgICAgYnRuLmNsYXNzTGlzdC5hZGQoJ2ZhZGUtaW4nKTsKICAgICAgICBjb3VudC5zdHlsZS5hbmltYXRpb25EZWxheSA9ICcuMnMnOwogICAgICAgIGJ0bi5zdHlsZS5hbmltYXRpb25EZWxheSA9ICcuNHMnOwogICAgICAgIGJ0bi5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBwcmljZS5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlLWluJyk7CiAgICAgICAgICBjb3VudC5jbGFzc0xpc3QucmVtb3ZlKCdmYWRlLWluJyk7CiAgICAgICAgICBidG4uY2xhc3NMaXN0LnJlbW92ZSgnZmFkZS1pbicpOwogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRQcmljZTogZnVuY3Rpb24gYWRkUHJpY2UoKSB7CiAgICAgIHRoaXMuZGV0YWlsLnByaWNlKys7CiAgICB9LAogICAgbWludXNQcmljZTogZnVuY3Rpb24gbWludXNQcmljZSgpIHsKICAgICAgaWYgKHRoaXMuZGV0YWlsLnByaWNlID4gMCkgdGhpcy5kZXRhaWwucHJpY2UtLTsKICAgIH0sCiAgICBhZGRDb3VudDogZnVuY3Rpb24gYWRkQ291bnQoKSB7CiAgICAgIHRoaXMuZGV0YWlsLmNvdW50Kys7CiAgICB9LAogICAgbWludXNDb3VudDogZnVuY3Rpb24gbWludXNDb3VudCgpIHsKICAgICAgaWYgKHRoaXMuZGV0YWlsLmNvdW50ID4gMCkgdGhpcy5kZXRhaWwuY291bnQtLTsKICAgIH0sCiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5lZWRzLXZhbGlkYXRpb24nKTsKICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZm9ybXMpLmZvckVhY2goZnVuY3Rpb24gKGZvcm0sIGluZGV4KSB7CiAgICAgICAgaWYgKGlzTmFOKGZvcm0udmFsdWUpIHx8IGZvcm0udmFsdWUgPT0gJycgfHwgZm9ybS52YWx1ZSA8IDApIHsKICAgICAgICAgIHZtLnZhbGlkYXRpb24uc3BsaWNlKGluZGV4LCAxLCB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdm0udmFsaWRhdGlvbi5zcGxpY2UoaW5kZXgsIDEsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAodGhpcy52YWxpZGF0aW9uLmV2ZXJ5KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPT0gZmFsc2U7CiAgICAgIH0pKSB0aGlzLnVwZGF0ZURldGFpbCgpOwogICAgfSwKICAgIHVwZGF0ZURldGFpbDogZnVuY3Rpb24gdXBkYXRlRGV0YWlsKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHZhciB2bSA9IHRoaXM7CiAgICAgIHZhciB0b3AgPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wOwogICAgICB0aGlzLmF4aW9zLnBhdGNoKCIiLmNvbmNhdChib29rRGV0YWlsQVBJKS5jb25jYXQodGhpcy4kcm91dGUucGFyYW1zLmlkKSwgdGhpcy5kZXRhaWwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PSAyMDApIHsKICAgICAgICAgIF90aGlzMi5tb2RhbCA9IHRydWU7CiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgICAgdm0ubW9kYWwgPSBmYWxzZTsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJhdXRvIjsKICAgICAgICAgIH0sIDEwMDApOwogICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignYm9keScpLnN0eWxlLnNldFByb3BlcnR5KCctLXRvcCcsIHRvcCArICdweCcpOwogICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICJoaWRkZW4iOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Users/anne/vue_unnotech/src/components/BookDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n\n  <div>\n    <div class=\"wrap-book-detail\">\n      <div class=\"wrap-detail\">\n        <div class=\"row\">\n          <label for=\"inputPrice\" class=\"mt-2\">價格</label>\n          <button class=\"btn\"><i class=\"bi bi-dash-square\" @click=\"minusPrice\"></i></button>\n          <input id=\"inputPrice\"\n            :class=\"['needs-validation', {'is-invalid':validation[0]}, 'form-control']\" \n            v-model=\"detail.price\"\n          >\n          <button class=\"btn\"><i class=\"bi bi-plus-square\" @click=\"addPrice\"></i></button>\n          <div class=\"invalid-feedback\">Please enter positive number.</div>\n        </div>\n\n        <div class=\"row mt-3\">\n          <label for=\"inputCount\" class=\"mt-2\">數量</label>\n          <button class=\"btn\"><i class=\"bi bi-dash-square\" @click=\"minusCount\"></i></button>\n          <input id=\"inputCount\" \n            :class=\"['needs-validation', {'is-invalid':validation[1]}, 'form-control']\" \n            v-model=\"detail.count\"\n          >\n          <button class=\"btn\"><i class=\"bi bi-plus-square\" @click=\"addCount\"></i></button>\n          <div class=\"invalid-feedback\">Please enter positive number.</div> \n        </div>\n      </div>\n    \n      <button id=\"btn\" class=\"btn btn-primary mt-3\" @click=\"submit\">\n        確認修改\n        <i class=\"bi bi-pencil-square\"></i>\n      </button>\n    </div>\n\n    <div v-if=\"modal\" class=\"open-modal\">\n      <div class=\"modal-dialog slide-dialog\">\n        <i class=\"bi bi-check-circle\"></i>\n        Successfully updated!\n      </div>\n    </div>\n  </div>\n\n</template>\n\n\n<script>\n\nconst bookDetailAPI = 'https://fe-interview-api.unnotech.com/profile/';\n\nexport default {\n  data() {\n    return {\n      detail: '',\n      validation: [false, false],\n      modal: '',\n    }\n  },\n  mounted() {\n    this.getDetail();\n  },\n  watch: {\n    $route() {\n      this.getDetail();\n    }\n  },\n  methods: {\n    getDetail() {   \n      const btn = document.querySelector('#btn');\n      const count = document.querySelector('#count');\n      const price = document.querySelector('#price');\n\n      this.axios.get(`${bookDetailAPI}${this.$route.params.id}`).then(response => {\n        this.detail = {\n          price: parseInt(response.data.price, 10),\n          count: parseInt(response.data.count, 10)\n        }\n      }).then(() => {\n        price.classList.add('fade-in');\n        count.classList.add('fade-in');\n        btn.classList.add('fade-in');\n        count.style.animationDelay = '.2s';\n        btn.style.animationDelay = '.4s';\n\n        btn.addEventListener('animationend', () => {\n          price.classList.remove('fade-in');\n          count.classList.remove('fade-in');\n          btn.classList.remove('fade-in');\n        });\n      })\n    },\n    addPrice() {\n      this.detail.price ++;\n    },\n    minusPrice() {\n      if (this.detail.price > 0) this.detail.price --;\n    },\n    addCount() {\n      this.detail.count ++;\n    },\n    minusCount() {\n      if (this.detail.count > 0) this.detail.count --;\n    },\n    submit() {\n      const vm = this;\n      const forms = document.querySelectorAll('.needs-validation');\n\n      Array.prototype.slice.call(forms).forEach(function (form, index) {\n        if (isNaN(form.value) || form.value == '' || form.value <  0) {\n          vm.validation.splice(index, 1, true);\n          \n        } else {\n          vm.validation.splice(index, 1, false);\n        }\n      })\n      if (this.validation.every(e => e == false)) this.updateDetail();\n    },\n    updateDetail() {\n      const vm = this;\n      const top = document.documentElement.scrollTop;\n\n      this.axios.patch(`${bookDetailAPI}${this.$route.params.id}`, this.detail).then(response => {\n        if (response.status == 200) {\n          this.modal = true;\n\n          setTimeout(() => {\n            vm.modal = false;\n            document.body.style.overflow = \"auto\"; \n          }, 1000); \n\n          document.querySelector('body').style.setProperty('--top', top + 'px');\n          document.body.style.overflow = \"hidden\"; \n        }\n      })\n    },\n  }\n}\n</script>\n\n<style>\n\n  body {\n    --top: 0;\n  }\n\n  .wrap-book-detail {\n    width: 30%;\n    margin: 0 auto;\n    padding: 3vh 1vh 2vh 1vh;\n    background: linear-gradient(to right, #4BC0C8, #C779D0, #FEAC5E);\n  }\n\n  .wrap-detail {\n    margin: 0 auto;\n    max-width: 80%;\n  }\n\n  input {\n    max-width: 60%; \n    text-align: center;\n  }\n\n  .fade-in { \n    animation: fade-in .2s;\n  }\n\n  .modal-dialog{\n    background: white;\n    display: inline-block;\n    padding: 15px;\n    border-radius: 5px;\n    animation: slide-dialog .5s;\n  }\n\n  .open-modal {\n    width: 100%;\n    height: 100%;\n    background: rgb(0, 0, 0, .4);\n    position: absolute;\n    top: var(--top);\n    left: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    animation: pop-modal .5s;\n  }\n\n  @media (max-width: 546px) {\n    .wrap-book-detail {\n      width: 100%;\n      margin: 0 auto;\n      padding: 3vh 1vh 2vh 1vh;\n      background: linear-gradient(to right, #4BC0C8, #C779D0, #FEAC5E);\n    }\n  }\n\n  @keyframes pop-modal {\n    0% {\n      opacity: 0;\n    }\n    100% {\n      opacity: 1;\n    }\n  }\n\n  @keyframes slide-dialog {\n    0% {\n      transform: translate(0, 10vh)\n    }\n    100% {\n      transform: translate(0, 0);\n    }\n  }\n\n  @keyframes fade-in {\n    0% {\n      opacity: 0;\n      transform: translate(-100px, 0);\n    }\n    100% {\n      opacity: 1;\n      transform: translate(0, 0);\n    }\n  }\n\n</style>\n"],"sourceRoot":""}]}