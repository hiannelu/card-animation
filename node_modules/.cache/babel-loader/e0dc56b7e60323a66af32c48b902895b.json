{"remainingRequest":"/Users/anne/vue_unnotech/node_modules/babel-loader/lib/index.js!/Users/anne/vue_unnotech/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/anne/vue_unnotech/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/anne/vue_unnotech/src/components/BookDetail.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/anne/vue_unnotech/src/components/BookDetail.vue","mtime":1614784765569},{"path":"/Users/anne/vue_unnotech/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anne/vue_unnotech/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/anne/vue_unnotech/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/anne/vue_unnotech/node_modules/vue-loader-v16/dist/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICQgZnJvbSAnanF1ZXJ5JzsKdmFyIGJvb2tEZXRhaWxBUEkgPSAnaHR0cHM6Ly9mZS1pbnRlcnZpZXctYXBpLnVubm90ZWNoLmNvbS9wcm9maWxlLyc7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZGV0YWlsOiAnJywKICAgICAgc2hvdzogZmFsc2UsCiAgICAgIGZhZGU6ICdhbmltYXRlX19saWdodFNwZWVkSW5MZWZ0JywKICAgICAgdmFsaWRhdGlvbjogW2ZhbHNlLCBmYWxzZV0KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkge30sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHsKICAgIHRoaXMuZ2V0RGV0YWlsKCk7CiAgfSwKICB3YXRjaDogewogICAgJHJvdXRlOiBmdW5jdGlvbiAkcm91dGUoKSB7CiAgICAgIHRoaXMuZ2V0RGV0YWlsKCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXREZXRhaWw6IGZ1bmN0aW9uIGdldERldGFpbCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2J0bicpOwoKICAgICAgaWYgKHRoaXMuZGV0YWlsICE9ICcnKSB7CiAgICAgICAgdGhpcy5mYWRlID0gJ2FuaW1hdGVfX2xpZ2h0U3BlZWRPdXRSaWdodCc7CiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdhbmltYXRpb25lbmQnLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpcy5kZXRhaWxzKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB0aGlzLmRldGFpbHMoKTsKICAgIH0sCiAgICBkZXRhaWxzOiBmdW5jdGlvbiBkZXRhaWxzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHRoaXMuYXhpb3MuZ2V0KCIiLmNvbmNhdChib29rRGV0YWlsQVBJKS5jb25jYXQodGhpcy4kcm91dGUucGFyYW1zLmlkKSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7CiAgICAgICAgX3RoaXMyLmRldGFpbCA9IHsKICAgICAgICAgIHByaWNlOiBwYXJzZUludChyZXNwb25zZS5kYXRhLnByaWNlLCAxMCksCiAgICAgICAgICBjb3VudDogcGFyc2VJbnQocmVzcG9uc2UuZGF0YS5jb3VudCwgMTApCiAgICAgICAgfTsKICAgICAgfSkudGhlbihmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIF90aGlzMi5mYWRlID0gJ2FuaW1hdGVfX2xpZ2h0U3BlZWRJbkxlZnQnOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRQcmljZTogZnVuY3Rpb24gYWRkUHJpY2UoKSB7CiAgICAgIHRoaXMuZGV0YWlsLnByaWNlKys7CiAgICB9LAogICAgbWludXNQcmljZTogZnVuY3Rpb24gbWludXNQcmljZSgpIHsKICAgICAgaWYgKHRoaXMuZGV0YWlsLnByaWNlID4gMCkgdGhpcy5kZXRhaWwucHJpY2UtLTsKICAgIH0sCiAgICBhZGRDb3VudDogZnVuY3Rpb24gYWRkQ291bnQoKSB7CiAgICAgIHRoaXMuZGV0YWlsLmNvdW50Kys7CiAgICB9LAogICAgbWludXNDb3VudDogZnVuY3Rpb24gbWludXNDb3VudCgpIHsKICAgICAgaWYgKHRoaXMuZGV0YWlsLmNvdW50ID4gMCkgdGhpcy5kZXRhaWwuY291bnQtLTsKICAgIH0sCiAgICBzdWJtaXQ6IGZ1bmN0aW9uIHN1Ym1pdCgpIHsKICAgICAgdmFyIHZtID0gdGhpczsKICAgICAgdmFyIGZvcm1zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLm5lZWRzLXZhbGlkYXRpb24nKTsKICAgICAgQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZm9ybXMpLmZvckVhY2goZnVuY3Rpb24gKGZvcm0sIGluZGV4KSB7CiAgICAgICAgaWYgKGlzTmFOKGZvcm0udmFsdWUpIHx8IGZvcm0udmFsdWUgPT0gJycgfHwgZm9ybS52YWx1ZSA8IDApIHsKICAgICAgICAgIHZtLnZhbGlkYXRpb24uc3BsaWNlKGluZGV4LCAxLCB0cnVlKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdm0udmFsaWRhdGlvbi5zcGxpY2UoaW5kZXgsIDEsIGZhbHNlKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICBpZiAodGhpcy52YWxpZGF0aW9uLmV2ZXJ5KGZ1bmN0aW9uIChlKSB7CiAgICAgICAgcmV0dXJuIGUgPT0gZmFsc2U7CiAgICAgIH0pKSB0aGlzLnVwZGF0ZURldGFpbCgpOwogICAgfSwKICAgIHVwZGF0ZURldGFpbDogZnVuY3Rpb24gdXBkYXRlRGV0YWlsKCkgewogICAgICAvLyBjb25zdCBtb2RhbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdtb2RhbCcpOwogICAgICB0aGlzLmF4aW9zLnBhdGNoKCIiLmNvbmNhdChib29rRGV0YWlsQVBJKS5jb25jYXQodGhpcy4kcm91dGUucGFyYW1zLmlkKSwgdGhpcy5kZXRhaWwpLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpOwoKICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09IDIwMCkgewogICAgICAgICAgJCgnI21vZGFsJykubW9kYWwoJ3Nob3cnKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["/Users/anne/vue_unnotech/src/components/BookDetail.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\n  <div>\n    <div class=\"wrap-book-detail\">\n      <table>\n        <tbody>\n          <tr :class=\"['animate__animated', fade]\">\n            <td><label for=\"inputPrice\">價格</label></td>\n            <td><i class=\"far fa-minus-square\" @click=\"minusPrice\"></i></td>\n            <td>\n              <input id=\"inputPrice\" :class=\"['needs-validation', {'is-invalid':validation[0]}]\" v-model=\"detail.price\">\n              <div class=\"invalid-feedback\">Please enter positive number.</div>\n            </td>\n            <td><i class=\"far fa-plus-square\" @click=\"addPrice\"></i></td>\n          </tr>\n          <tr :class=\"['animate__animated', fade, 'delay', 'animate__delay-1s']\">\n            <td><label for=\"inputCount\">數量</label></td>\n            <td><i class=\"far fa-minus-square\" @click=\"minusCount\"></i></td>\n            <td>\n              <input id=\"inputCount\" :class=\"['needs-validation', {'is-invalid':validation[1]}]\" v-model=\"detail.count\">\n              <div class=\"invalid-feedback\">Please enter positive number.</div>\n            </td>\n            <td><i class=\"far fa-plus-square\" @click=\"addCount\"></i></td>\n          </tr>\n        </tbody>\n      </table>\n      <button id=\"btn\" :class=\"['btn', 'btn-primary', 'animate__animated', fade, 'delay', 'animate__delay-2s']\" \n\n        @click=\"submit\">\n        確認修改\n      </button>\n    </div>\n\n\n    <div class=\"modal fade\" id=\"modal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-body\">\n            Successfully updated!\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n</template>\n\n<script>\n\nimport $ from 'jquery';\n\nconst bookDetailAPI = 'https://fe-interview-api.unnotech.com/profile/';\n\nexport default {\n  data() {\n    return {\n      detail: '',\n      show: false,\n      fade: 'animate__lightSpeedInLeft',\n      validation: [false, false]\n    }\n  },\n  created() {\n    \n  },\n  mounted() {\n    this.getDetail();\n  },\n  watch: {\n    $route() {\n      this.getDetail();\n    }\n  },\n  methods: {\n    getDetail() {   \n      const element = document.querySelector('#btn');\n\n      if (this.detail != '') {\n        this.fade = 'animate__lightSpeedOutRight';\n        element.addEventListener('animationend', () => {\n          this.details();\n        });\n      } else this.details();\n    },\n    details() {\n      this.axios.get(`${bookDetailAPI}${this.$route.params.id}`).then(response => {\n        console.log(response);\n        this.detail = {\n          price: parseInt(response.data.price, 10),\n          count: parseInt(response.data.count, 10)\n        }\n      }).then(() => this.fade = 'animate__lightSpeedInLeft')\n    },\n    addPrice() {\n      this.detail.price ++;\n    },\n    minusPrice() {\n      if (this.detail.price > 0) this.detail.price --;\n    },\n    addCount() {\n      this.detail.count ++;\n    },\n    minusCount() {\n      if (this.detail.count > 0) this.detail.count --;\n    },\n    submit() {\n      const vm = this;\n      const forms = document.querySelectorAll('.needs-validation');\n\n      Array.prototype.slice.call(forms).forEach(function (form, index) {\n        if (isNaN(form.value) || form.value == '' || form.value <  0) {\n          vm.validation.splice(index, 1, true);\n        } else {\n          vm.validation.splice(index, 1, false);\n        }\n      })\n      if (this.validation.every(e => e == false)) this.updateDetail();\n    },\n    updateDetail() {\n      // const modal = document.getElementById('modal');\n\n      this.axios.patch(`${bookDetailAPI}${this.$route.params.id}`, this.detail).then(response => {\n        console.log(response)\n        if (response.status == 200) {\n          $('#modal').modal('show');\n\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n.wrap-book-detail {\n  width: 50%;\n  margin: 0 auto;\n  background: #FEAC5E;\n  background: -webkit-linear-gradient(to right, #4BC0C8, #C779D0, #FEAC5E);\n  background: linear-gradient(to right, #4BC0C8, #C779D0, #FEAC5E);\n  --animate-duration: 0.5s;\n}\n\n.delay {\n  --animate-delay: 0.1s\n}\n\n.modal-dialog {\n  display: inline-block;\n  height: 80%;\n  width: 15rem;\n  display:flex;\n  align-items:center;\n}\n\n</style>\n"],"sourceRoot":""}]}